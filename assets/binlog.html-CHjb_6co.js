import{_ as o}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as i,o as t}from"./app-CdIZQ5J_.js";const a="/backend-book/assets/20201211224328-Dia8YRsm.png",l="/backend-book/assets/20201211225943-jnk7jbSv.png",r="/backend-book/assets/20201211231437-BUvGH4t-.png",d={};function g(c,e){return t(),n("div",null,e[0]||(e[0]=[i('<h2 id="一、redo-log-介绍" tabindex="-1"><a class="header-anchor" href="#一、redo-log-介绍"><span>一、redo Log 介绍</span></a></h2><p><code>redo log</code> 是一种偏向物理性质的重做日志，因为他里面记录类似的这样的东西，“对那个数据也中的什么记录，做了个什么修改”。它是 <code>InnoDB</code> 存储引擎特有的东西。</p><h2 id="二、bin-log-日志" tabindex="-1"><a class="header-anchor" href="#二、bin-log-日志"><span>二、bin Log 日志</span></a></h2><p><code>bin log</code> 叫做归档日志，它里面记录的是偏于逻辑性的日志， 类似 <code>对 users 表中的 id=10 的一行数据做了更新操作，更新以后的值是什么</code>。它不是 InnoDB 存储引擎特有的日志文件，属于 <code>mysql server</code> 日志文件。</p><p>当事务提交的时候，redo log日志会写入磁盘文件中。其实在提交事务的时候，我们同时还会把这次更新对应的binlog日志写入磁盘的文件中。</p><figure><img src="'+a+'" alt="binlog" tabindex="0" loading="lazy"><figcaption>binlog</figcaption></figure><h2 id="三、bin-log-的刷盘策略" tabindex="-1"><a class="header-anchor" href="#三、bin-log-的刷盘策略"><span>三、bin Log 的刷盘策略</span></a></h2><p>通过 <code>sync_binlog</code> 参数可以设置刷盘策略。参数为 <code>0</code>（默认值是 0）当 binlog 写入磁盘的时候，其实不是直接进入磁盘文件，而是进入 os cache 内存缓存。但是如果此时服务器宕机，存在os cache里的binlog日志是会丢失的。参数为 <code>1</code> 强制在提交事务的时候，binlog直接写入磁盘文件中，那么这样提交事务之后，哪怕机器宕机，磁盘上的binlog是不会丢失的。</p><h2 id="四、基于-bin-log-和-redo-log-完成事务的提交" tabindex="-1"><a class="header-anchor" href="#四、基于-bin-log-和-redo-log-完成事务的提交"><span>四、基于 bin Log 和 redo Log 完成事务的提交</span></a></h2><figure><img src="'+l+'" alt="基于binlog和redo log完成事务的提交" tabindex="0" loading="lazy"><figcaption>基于binlog和redo log完成事务的提交</figcaption></figure><p>当我们把binlog写入磁盘文件后，接着就会完成最终事务的提交，此时会把本次更新对应的binlog文件名和这次binlog日志在文件里的位置，都写入到redo log文件中，同时在redo log日志文件里写入一个commit标记。在完成这件事情之后，才算最终完成了事务的提交。写入commit标记的意义是保持，redo log 和 binlog 日志保持一致的。</p><h2 id="五、脏数据刷回磁盘" tabindex="-1"><a class="header-anchor" href="#五、脏数据刷回磁盘"><span>五、脏数据刷回磁盘</span></a></h2><figure><img src="'+r+'" alt="通过io线程将数据刷到磁盘中" tabindex="0" loading="lazy"><figcaption>通过io线程将数据刷到磁盘中</figcaption></figure><p>当上面的步骤执行完成之后，最后会有一个线程去随机的把buffer pool的修改后的数据刷回到磁盘中。即使mysql服务宕机也没有关系，因为所有修改后的数据都在redo log中了。</p>',14)]))}const b=o(d,[["render",g],["__file","binlog.html.vue"]]),m=JSON.parse('{"path":"/database/mysql/advanced/binlog.html","title":"【第四篇章】BinLog 的作用是啥","lang":"zh-CN","frontmatter":{"title":"【第四篇章】BinLog 的作用是啥","index":false,"isOriginal":true,"category":"数据库","tag":"mysql","date":"2024-08-09T00:00:00.000Z","description":"一、redo Log 介绍 redo log 是一种偏向物理性质的重做日志，因为他里面记录类似的这样的东西，“对那个数据也中的什么记录，做了个什么修改”。它是 InnoDB 存储引擎特有的东西。 二、bin Log 日志 bin log 叫做归档日志，它里面记录的是偏于逻辑性的日志， 类似 对 users 表中的 id=10 的一行数据做了更新操作，更...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/backend-book/database/mysql/advanced/binlog.html"}],["meta",{"property":"og:site_name","content":"极速蜗牛"}],["meta",{"property":"og:title","content":"【第四篇章】BinLog 的作用是啥"}],["meta",{"property":"og:description","content":"一、redo Log 介绍 redo log 是一种偏向物理性质的重做日志，因为他里面记录类似的这样的东西，“对那个数据也中的什么记录，做了个什么修改”。它是 InnoDB 存储引擎特有的东西。 二、bin Log 日志 bin log 叫做归档日志，它里面记录的是偏于逻辑性的日志， 类似 对 users 表中的 id=10 的一行数据做了更新操作，更..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-09T15:18:42.000Z"}],["meta",{"property":"article:author","content":"青衣"}],["meta",{"property":"article:tag","content":"mysql"}],["meta",{"property":"article:published_time","content":"2024-08-09T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-08-09T15:18:42.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"【第四篇章】BinLog 的作用是啥\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-08-09T00:00:00.000Z\\",\\"dateModified\\":\\"2024-08-09T15:18:42.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"青衣\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"一、redo Log 介绍","slug":"一、redo-log-介绍","link":"#一、redo-log-介绍","children":[]},{"level":2,"title":"二、bin Log 日志","slug":"二、bin-log-日志","link":"#二、bin-log-日志","children":[]},{"level":2,"title":"三、bin Log 的刷盘策略","slug":"三、bin-log-的刷盘策略","link":"#三、bin-log-的刷盘策略","children":[]},{"level":2,"title":"四、基于 bin Log 和 redo Log 完成事务的提交","slug":"四、基于-bin-log-和-redo-log-完成事务的提交","link":"#四、基于-bin-log-和-redo-log-完成事务的提交","children":[]},{"level":2,"title":"五、脏数据刷回磁盘","slug":"五、脏数据刷回磁盘","link":"#五、脏数据刷回磁盘","children":[]}],"git":{"createdTime":1723216722000,"updatedTime":1723216722000,"contributors":[{"name":"Tsing","email":"ld320321@163.com","commits":1}]},"readingTime":{"minutes":2.02,"words":607},"filePathRelative":"database/mysql/advanced/binlog.md","localizedDate":"2024年8月9日","excerpt":"<h2>一、redo Log 介绍</h2>\\n<p><code>redo log</code> 是一种偏向物理性质的重做日志，因为他里面记录类似的这样的东西，“对那个数据也中的什么记录，做了个什么修改”。它是 <code>InnoDB</code> 存储引擎特有的东西。</p>\\n<h2>二、bin Log 日志</h2>\\n<p><code>bin log</code> 叫做归档日志，它里面记录的是偏于逻辑性的日志， 类似 <code>对 users 表中的 id=10 的一行数据做了更新操作，更新以后的值是什么</code>。它不是 InnoDB 存储引擎特有的日志文件，属于 <code>mysql server</code> 日志文件。</p>","autoDesc":true}');export{b as comp,m as data};
